 

juju destroy-model ceph --force --no-wait

juju add-model --config default-series=jammy ceph
juju deploy -n 3 --channel reef/stable  --config osd-devices="/dev/sdb /dev/sdc /dev/sdd" --constraints tags=osd ceph-osd
juju deploy -n 3 --channel reef/stable  --constraints tags=mon   ceph-mon  
juju integrate ceph-osd:mon ceph-mon:osd

 




juju ssh ceph-mon/0 sudo nano /etc/ceph/ceph.conf
juju ssh ceph-mon/3 sudo cat /etc/ceph/ceph.client.admin.keyring 
juju ssh ceph-mon/3 sudo cat /var/lib/ceph/mgr

cat /var/lib/ceph/mgr/ceph-ceph-mon-4/keyring 








recovering ceph guides: 

1. get fsid   da5ad654-cd63-11ef-835a-3d7955d11f83

0c6a37a6-cdc4-11ef-94a6-739829eede47

juju deploy ceph-mon -n 3   --constraints tags=mon --config fsid='0c6a37a6-cdc4-11ef-94a6-739829eede47'   

juju run-action --wait ceph-osd/0 stop osds=all
juju run-action --wait ceph-osd/6 osd-in osds=all
juju run-action --wait ceph-osd/6 osd-out osds=all





juju ssh ceph-mon/2 -- sudo ceph status
juju ssh ceph-mon/0 sudo nano /etc/ceph/ceph.conf
juju ssh ceph-osd/0 sudo nano /etc/ceph/ceph.conf
juju add-unit   --constraints tags=mon ceph-mon 



mon removal activities 
ceph mon getmap -o monmap.bin

monmaptool --print monmap.bin



ceph mon remove
ceph mon stat

juju destroy-model ceph --force --no-wait

juju config ceph-mon monitor-count=1

juju ssh ceph-mon/0 sudo systemctl stop ceph-mon.service
juju debug-log --include ceph-mon/1 --replay

ceph-monstore-tool /tmp/mon-store/ rebuild --keyring /tmp/keyring --mon-ids monitor-vm-5 monitor-vm-4 monitor-vm-3


monmaptool --print /var/lib/ceph/osd/ceph-0/activate.monmap
